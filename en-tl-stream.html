<head>
	<head>
	<title>HoloChatStats: English Top Live Translated Streams</title>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="js/jquery.csv.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPX4HFYKX"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-9XPX4HFYKX');
	</script>
	<script>
	function sortBySelection(streamArr){
		var sortKey = $("#sorting").val();
		if(sortKey == "TPM"){
			// Sort reversed so the max tpm is up top
			// Apparently "1" > "2" is defined differently in different browsers, so subtraction is used here
			return streamArr.sort((first, second) => second[2] - first[2]);
		}
		else if(sortKey == "Streamer"){
			return streamArr.sort((first, second) => first[0].localeCompare(second[0]));
		}
		else {
			return streamArr;
		}
	}
	function update() {
		filename = "csv/tl/enstr/" + $("#monthPicker").val() + ".csv";
		$("#stream_row").text('');
		$.get(filename, function(data) {
			var streamArr = $.csv.toArrays(data);
			var streamSorted = sortBySelection(streamArr);
			for (var i = 0; i < streamArr.length; i++) {
				if (i == 0) {
					continue;
				}
				else {
					item_txt = ""
					item_txt += '<div class="col-md-4"><div class="thumbnail"><a href="https://www.youtube.com/watch?v=' + streamSorted[i][3] + '" target="_blank"><img src="https://img.youtube.com/vi/' + streamSorted[i][3] + '/mqdefault.jpg"><div class="caption"><p>' + streamSorted[i][0] + ' - ' + streamSorted[i][1] + '<br/>TPM: ' + streamSorted[i][2] + '</p></div></div></a></div></div>';
					$("#stream_row").append(item_txt);
				}
			}
		}, 'text');
	}
	$(document).ready(function() {
		update($("#monthPicker").val());
		$("#monthPicker").on('change', update);
		$("#sorting").on('change', update);
	});
	</script>
<style>
	body {
		padding-top: 65px;
	}
	p, h3 {
		color: #DEDEDE;
	}
</style>
</head>
<body style="background-color:#221F1E;">
	<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
		<a class="navbar-brand" href="index.html">HoloChatStats</a>
		<div class="collapse navbar-collapse" id="navbarCollapse">
		<ul class="navbar-nav mr-auto">
			<div class="dropdown">
				<button class="btn btn-secondary dropdown-toggle" type="button" id="categoryButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					Language
				</button>
				<div class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenuButton" id="categoryDropdown">
				<div id="categoryList">
						<a class="dropdown-item" id="non-jp-holojp" href="nonjp-holojp.html">Non-JP % (HoloJP)</a>
						<a class="dropdown-item" id="non-jp-holostars" href="nonjp-holostars.html">Non-JP % (HoloStars)</a>
						<a class="dropdown-item" id="jp-stats" href="jp-holoiden.html">JP % (HoloID/HoloEN)</a>
						<a class="dropdown-item" id="ru-holojp" href="ru-holojp.html">RU % (HoloJP)</a>
						<a class="dropdown-item" id="ru-other" href="ru-other.html">RU % (HoloStars/HoloID/HoloEN)</a>
						<a class="dropdown-item" id="lang-summary" href="langsum.html">Language Summary Stats</a>
				</div>
				</div>
			</div>
			<div class="dropdown">
				<button class="btn btn-secondary dropdown-toggle" type="button" id="categoryButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					Translations
				</button>
				<div class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenuButton" id="categoryDropdown">
				<div id="categoryList">
						<a class="dropdown-item" id="en-live-tl" href="en-livetl.html">English Live Translations</a>
						<a class="dropdown-item" id="en-live-tl" href="en-tl-stream.html">English Top Live Translated Streams</a>
				</div>
				</div>
			</div>
			<div class="dropdown">
				<button class="btn btn-secondary dropdown-toggle" type="button" id="categoryButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					Users
				</button>
				<div class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenuButton" id="categoryDropdown">
				<div id="categoryList">
						<a class="dropdown-item" id="common-chat" href="common-chat.html">Common User Heatmap</a>
						<a class="dropdown-item" id="excl-chat" href="excl-chat.html">Exclusive Chat Users</a>
				</div>
				</div>
			</div>
			<div class="dropdown">
				<button class="btn btn-secondary dropdown-toggle" type="button" id="categoryButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					Other
				</button>
				<div class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenuButton" id="categoryDropdown">
				<div id="categoryList">
						<a class="dropdown-item" id="stream-time" href="stream-time.html">Stream Time Stats</a>
				</div>
				</div>
			</div>
		</ul>
				<ul class="navbar-nav ml-auto">
			<div class="dropdown">
				<button class="btn btn-secondary dropdown-toggle" type="button" id="sitesButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					Other Sites
				</button>
				<div class="dropdown-menu scrollable-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton" id="categoryDropdown">
				<div id="siteList">
						<h6 class="dropdown-header">Machine Generated Clips</h6>
						<a class="dropdown-item" id="non-jp-holojp" href="https://mipacd.github.io/auto-clip/holo.html">HoloAutoClip</a>
						<a class="dropdown-item" id="non-jp-holostars" href="https://mipacd.github.io/auto-clip/vt.html">VTAutoClip</a>
				</div>
		</div>
		</ul>
		</div>
	</nav>
		<h3>Top Live Translated Streams of the Month (average translations per minute is 1 or more)</h3>
		<label style="color: #DEDEDE">Month: </label>
		<select id="monthPicker">
			<option value="2021-06">June 2021</option>
		    <option value="2021-05">May 2021</option>
			<option value="2021-04">April 2021</option>
			<option value="2021-03">March 2021</option>
			<option value="2021-02">February 2021</option>
			<option value="2021-01">January 2021</option>
			<option value="2020-12">December 2020</option>
			<option value="2020-11">November 2020</option>
			<option value="2020-10">October 2020</option>
			<option value="2020-09">September 2020</option>
			<option value="2020-08">August 2020</option>
			<option value="2020-07">July 2020</option>
			<option value="2020-06">June 2020</option>
		</select>
		<label style="Color: #DEDEDE">Sort By: </label>
		<select id="sorting">
			<option value="None" selected>None</option>
			<option value="TPM">TPM</option>
			<option value="Streamer">Streamer</option>
		</select>
	<div id="stream_ctr" class="container-fluid">
		<div id="stream_row" class="row">
		</div>
	</div>
</body>
